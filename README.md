# F030 Modbus ADS1110
 
вторая версия датчика с RS485, USB, Modbus

классическая схема с операционником, АЦП ADS1110 по I2C

так как выводы заняты UART, а частота обмена всего 200 измерений в секунду, применяем программный I2C

PA1 - SCL, PA2 - SDA

отчет по UART 19200 - стандартная скорость для MODBUS

адрес устройства по умолчанию 0х01

все в holding registers

команда 0х03 - чтение элемента, 0х10 (16) - запись элемента,

регистры

(чтение)          0х0000 - идент код 0х0001                                          (фотодатчик)

(чтение)          0х0001 - версия прошивки 0х0001                                    (базовая)

(чтение)          0х0002 - версия платы 0х0002                                       (с преобразователем ADS1110 и 15 преобразований в секунду)

(чтение/запись)   0х0003 - текущий или новый адрес прибора                           (по умолчанию 0х01)

(чтение/запись)   0х0004 - текущая или новая скорость передачи                       (по умолчанию 19200)

(чтение)          0х0005 - результат преобразования (два байта)

(чтение)   0х0006 - режим работы 0 - преобразование по запросу, 1 - по стробу (по внешней перемычке на линии строба)

(чтение)          0х0007 - счетчик запросов результата

(чтение/запись)   0х0008 - команды устройству 0х01 - перезагрузка, 0х02 - сброс счетчика запросов , 0х03 - сброс к настройкам по умолчанию

Написано для микроконтроллера STM32F030F4P6, среда MikroC
Файлы схемы и печатной платы DipTrace
